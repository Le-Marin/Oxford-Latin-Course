<!DOCTYPE html><html lang="ru"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIII</title>
    <link rel="shortcut icon" href="#">
  </head>
  <body>
    <div class="container">
      <h1 contenteditable="false">VIII</h1>
      <div class="text" contenteditable="false"><div><br></div><center><b>Смерть Гектора</b></center>

	Achillēs, ubi Patroclus <span class="word" data-value=":умер">mortuus est</span>, eum diū <span class="word" data-value="lūgēre:оплакивать, скорбеть по">lūget</span>; Hectorem <span class="word" data-value=": мстить, карать">vindicāre</span> cupit. Redit ad pugnam et comitēs in Trōiānōs dūcit. Illī, ubi Achillem vident, <span class="word" data-value="territus -a -um:испуганный">territī</span> sunt; in urbem fugiunt. Hector <span class="word" data-value="sōlus -a -um:один, единственный">sōlus</span> <span class="word" data-value="|(+ acc):за, снаружи">extrā</span> <span class="word" data-value="mūrus -ī|m:стена (крепостная)">mūrōs</span> manet.
	Pater Priamus, rēx Trōiae, et māter Hecuba eum vident ē mūrīs; fīlium vocant; Priamus clāmat: “Hector, nōlī Achillem in pugnam vocāre; nōn potes eum vincere. Urbem intrā; festīnā.” Māter clāmat: “Fīlī cāre, nōlī extrā mūrōs manēre; nōlī <span class="word" data-value="mors mortis|f:смерть">mortem</span> <span class="word" data-value="ob-īre:встречать, идти навстречу">obīre</span>; māter tua misera tē <span class="word" data-value="ōrāre:молить, умолять">ōrat</span>.”
	Sed Hector eōs nōn audit; urbem intrāre nōn <span class="word" data-value=":хочет, желает">vult</span>. Trōiānōs vocat et “<span class="word" data-value="porta -ae|f:ворота">Portās</span> <span class="word" data-value="claudere:закрывать">claudite</span>, Trōiānī,” inquit; “festīnāte. Ego sōlus maneō extrā mūrōs et Achillem ad pugnam vocō.”
	Trōiānī invītī portās claudunt. Hector sōlus Achillem exspectat. Ille <span class="word" data-value=":ближе">propius</span> accēdit. Tum Hector subitō <span class="word" data-value="timēre:бояться, страшиться">timet</span>. <span class="word" data-value="tergum -ī|n:спина">Tergum</span> <span class="word" data-value="vertere:поворачивать">vertit</span> et fugit.
	Achillēs celeriter currit, sed eum capere nōn potest. <span class="word" data-value=":трижды">Ter</span> circum mūrōs fugit Hector, sed tandem resistit; <span class="word" data-value="sē vertere:поворачиваться">sē vertit</span> et Achillem in pugnam vocat. Ille prōcēdit et hastam in Hectorem <span class="word" data-value="con-icere -iō:~ iacere">conicit</span>. Sed Hector hastam <span class="word" data-value="vītāre:избегать, уклоняться от">vītat</span>. Deinde Hector hastam conicit et Achillis <span class="word" data-value="parma -ae|f:щит (особ. небольшой и круглый)">parmam</span> <span class="word" data-value="per-cutere -iō:ударять, поражать, пробивать">percutit</span>. Sed Achillēs <span class="word" data-value="in-columis -e:невредимый">incolumis</span> est, nam parma eum <span class="word" data-value="servāre:спасать, уберегать, сберегать">servat</span>.
	Deinde Achillēs hastam <span class="word" data-value=":со всей силы">summā vī</span> conicit; <span class="word" data-value="volāre:летать, лететь">volat</span> hasta <span class="word" data-value=":по воздуху">per auram</span> et Hectorem <span class="word" data-value="trāns-fīgere:пронзать">trānsfīgit</span>. Ille ad terram cadit mortuus.
	<span class="word" data-value="ac-currere:подбегать">Accurrit</span> Achillēs et <span class="word" data-value="dīrus -a -um:жуткий">dīrum</span> <span class="word" data-value="facinus -oris|n:поступок; проступок">facinus</span> facit. Hectorem mortuum ad <span class="word" data-value="currum -ūs|m:повозка, колесница">currum</span> <span class="word" data-value="al-ligāre:привязывать">alligat</span> et circum mūrōs <span class="word" data-value="trahere:тащить">trahit</span>. Pater et māter ē mūrīs spectant. Hecuba clāmat: “Ō Achillēs,” inquit, “tandem ab īrā dēsiste; fīlium nōbīs <span class="word" data-value="red-dere:отдавать, возвращать">redde</span>.” Sed Achillēs eam nōn audit; Hectorem ad nāvēs trahit et eum <span class="word" data-value="re-linquere:оставлять">relinquit</span> in terrā <span class="word" data-value="iacēns -entis:лежащий, лежачий">iacentem</span>.
<br><div>

<center><b>Выкуп Гектора</b></center>

	Diū māter fīlium mortuum lūget; diū lūget Andromachē, <span class="word" data-value="uxor -ōris|f:жена">uxor</span> Hectoris; diū lūget Priamus. Tandem, ubi <span class="word" data-value="nox noctis|f:ночь">nox</span> venit, Priamus ex urbe exit et sōlus ad Graecōrum nāvēs prōcēdit. <span class="word" data-value="deus -ī|m:бог">Deus</span> Mercurius eum dūcit per <span class="word" data-value="vigil -ilis|m:караульный, страж">vigilēs</span> Graecōrum. Tandem ad Achillis <span class="word" data-value="tabernāculum -ī|n:палатка, шатёр">tabernāculum</span> advenit; intrat et Achillem salūtat; ad terram <span class="word" data-value="prō-cumbere:склоняться, припадать">prōcumbit</span> et “Ō Achillēs, tē ōrō,” inquit; “tandem ab īrā dēsiste et fīlium mortuum ad mātrem miseram <span class="word" data-value="re-mittere:отсылать, отправлять обратно, возвращать">remitte</span>.”
	Achillēs, ubi Priamum videt, <span class="word" data-value="attonitus -a -um:поражённый, изумлённый">attonitus</span> est. <span class="word" data-value="misericordia -ae|f:сострадание, участие, жалость">Misericordiā</span> <span class="word" data-value="commōtus -a -um:тронутый, растроганный">commōtus</span> est; Priamum ē terrā <span class="word" data-value="tollere:поднимать">tollit</span>, fīlium mortuum reddit et  patrem ad urbem Trōiam incolumem remittit.

<span style="font-size: 19.2px;">	</span>Respondē Latīnē:
<span style="font-size: 19.2px;">	</span>1. Quid agit Priamus ubi nox venit?
<span style="font-size: 19.2px;">	</span>2. Quōmodo vigilēs Graecōrum <span class="word" data-value="praeter-īre:проходить мимо">praeterit</span>?
<span style="font-size: 19.2px;">	</span>3. Quid facit ubi Achillis tabernāculum intrat?
<span style="font-size: 19.2px;">	</span>4. Ut <span class="word" data-value="sē gerere:вести себя, поступать">sē gerit</span> Achillēs post <span class="word" data-value="verbum -ī|n:слово">verba</span> Priamī?
</div></div>
    </div>
    <div id="tip" style="--x:1030px; --y:832px;"></div>
<style>
:root {
  --fg: #222;
  --bg: #fff;
  --tip-bg: #eee;
  --tip-bdc: #888;
  --word-fg: royalblue;
  --word-selected-fg: mediumblue;
  --note-fg: brown;
  --heading-fg: #444;
  --heading-bdc: #bbb;
}
body {
  font-family: Arial, sans-serif;
  font-size: 1.2rem;
  min-height: 100vh;
  margin: 0;
  color: var(--fg);
  background: var(--bg);
}
center {
  margin: -1.5em 0;
}
.container {
  max-width: 50em;
  padding: .5em;
  margin: auto;
}
h1 {
  margin: 0;
  padding: .4em .5rem;
  position: sticky;
  top: 0;
  color: var(--heading-fg);
  background: var(--bg);
  border-bottom: 1px solid var(--heading-bdc);
  z-index: 2;
}
.text {
  line-height: 1.5;
  padding: .5rem;
  margin-top: 1em;
  white-space: pre-wrap;
}
[contenteditable="true"] {
  outline: 2px solid var(--fg);
}
[contenteditable="true"]:focus {
  outline-color: cornflowerblue;
}
.word {
  color: var(--word-fg);
  cursor: pointer;
}
.word:hover {
  color: var(--word-selected-fg);
}

#tip {
  max-width: 20em;
  position: absolute;
  left: 0; top: 0;
  padding: .2em .5em;
  background-color: var(--tip-bg);
  border: 2px solid var(--tip-bdc);
  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.35);
  transform: translate(var(--x), var(--y));
  pointer-events: none;
  user-select: none;
}
#tip:empty {
  display: none;
}
#tip > strong {
  color: var(--word-fg);
}
.notes {
  margin-left: .5em;
  color: var(--note-fg);
}
.notes > i {
  font-style: normal;
  color: var(--fg);
}
.translate {
  font-family: Consolas, monospace;
  font-size: .75em;
  margin-left: .5em;
  opacity: .85;
}
#tip > strong:empty + span {
  margin-left: 0;
}

@media (prefers-color-scheme: dark) {
  :root {
    color-scheme: dark;
    --fg: #eee;
    --bg: #222;
    --tip-bg: #1a1a1a;
    --tip-bdc: #444;
    --word-fg: darkseagreen;
    --word-selected-fg: palegreen;
    --note-fg: #d55038;
    --heading-fg: #e5d2b9;
    --heading-bdc: #3a3a3a;
  }
}
</style>
<script>
(function() {
  'use strict';

  const wordsRegSource = /(?<=[\s“<>({\[])(&)(?=$|[\s.,;:!?”<>)}\]])/.source;
  const [heading, container] = document.querySelector('.container').children;

  function createWord(word, value) {
    return `<span class="word" data-value="${value}">${word}</span>`;
  }

  const cutSpaces = text => {
    return text.replace(/\s*\|\s*/, '|').replace(/\s*:\s*/, ':');
  };

  const wordReplacer = match => `<strong>${match}</strong>`;

  const notesReplacer = match => {
    const notes = match.slice(1).replace(/[(+/)]+/g, '<i>$&</i>');
    return `<span class="notes">${notes}</span>`;
  };

  const handleWordValue = text => {
    return text
      .replace(/[^:|]*/, wordReplacer)
      .replace(/\|[^:]+/, notesReplacer)
      .replace(/:(.+)/, '<span class="translate">$1</span>');
  };

  container.innerHTML = container.innerHTML
    .trim()
    .replace(/^[ \t]*/gm, ' '.repeat(5));

  function reduceContentWith(word, value) {
    const reg = new RegExp(wordsRegSource.replace('&', word));
    const template = createWord(word, value);
    container.innerHTML = container.innerHTML.replace(reg, template);
  }

  const tip = ((elem) => {
    const getClientWidth = () => document.documentElement.clientWidth;

    return {
      get hidden() {
        return !elem.offsetWidth;
      },
      move({left, top, right, bottom}) {
        const offset = 5;
        const w = elem.offsetWidth;
        const h = elem.offsetHeight + offset;
        const x = left + w >= getClientWidth() - offset ? right - w : left;
        const y = bottom + h >= window.innerHeight ? top - h : bottom + offset;
        elem.style.setProperty('--x', `${~~x}px`);
        elem.style.setProperty('--y', `${y + window.scrollY >> 0}px`);
      },
      render(text = '') {
        elem.innerHTML = text && handleWordValue(text);
        return this;
      }
    };
  })(document.getElementById('tip'));

  document.addEventListener('mouseover', (e) => {
    const trg = e.target;
    const text = trg.matches('.word') ? trg.dataset.value : '';

    if (text) return tip.render(text).move(trg.getBoundingClientRect());

    !tip.hidden && tip.render('');
  });

  document.addEventListener('keydown', (e) => {
    if (e.code === 'F2') {
      e.preventDefault();
      setWord(String(getSelection()).trim());
    } else if (e.code === 'F4') {
      e.preventDefault();
      heading.contentEditable = !heading.isContentEditable;
      container.contentEditable = !container.isContentEditable;
    } else if (e.ctrlKey && e.code === 'KeyS') {
      e.preventDefault();
      createNewFile();
    }
  });

  function setWord(selection) {
    if (!selection) return;

    let value = prompt('Input value for selection');
    value = value && cutSpaces(value.trim()).replace(/^&/, selection);
    value && addWord(selection, value);
  }

  function addWord(word, value) {
    reduceContentWith(word, value);
  }

  function markup(html) {
    return html
      .replace(/@c::(#?\w+)&lt;(.+?)&gt;/g, '<font color="$1">$2</font>')
      .replace(/@url::(.+?)&lt;(.+?)&gt;/g, '<a href="$1">$2</a>')
      .replace(/([_]{2})(.+?)\1/g, '<em>$2</em>')
      .replace(/([*]{2})(.+?)\1/g, '<strong>$2</strong>')
      .replace(/([+]{2})(.+?)\1/g, '<ins>$2</ins>')
      .replace(/([-]{2})(.+?)\1/g, '<del>$2</del>')
      .replace(/([=]{2})(.+?)\1/g, '<center>$2</center>')
  }

  function parseVars(html) {
    return html.replace(/{{.+?}}/g, match => {
      const value = cutSpaces(match.slice(2, -2));
      const word = value.match(/[^|]+/)[0];
      return createWord(word, value);
    });
  }

  container.addEventListener('keydown', (e) => {
    if (!(e.ctrlKey && e.code === 'Enter')) return;
    container.innerHTML = markup(parseVars(container.innerHTML));
  });

  heading.addEventListener('input', () => {
    document.title = heading.textContent;
  });

  function createNewFile() {
    const blob = new Blob(
      ['<!DOCTYPE html>', document.documentElement.outerHTML],
      {type: 'text/html'}
    );
    const link = document.createElement('a');
    const name = heading.textContent.toLowerCase().replaceAll(' ', '_');
    link.download = `${name}.html`;
    link.href = URL.createObjectURL(blob);
    link.click();
    URL.revokeObjectURL(link.href);
  }
})();
</script>
  
</body></html>
